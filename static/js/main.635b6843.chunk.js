(this.webpackJsonpemphasoft=this.webpackJsonpemphasoft||[]).push([[0],{116:function(e,t,s){},117:function(e,t,s){},14:function(e,t,s){e.exports={images:"Users_images__1jz2J",customer:"Users_customer__15DTh",customerImageName:"Users_customerImageName__3sQKS",active:"Users_active__3EToL",notActive:"Users_notActive__2f5Ry",activeStatus:"Users_activeStatus__2Ye1Q",customerInfo:"Users_customerInfo__PsXn6",superUser:"Users_superUser__Oitlh",usersFilterForm:"Users_usersFilterForm__2-eam",usersFilterFormColumn:"Users_usersFilterFormColumn__kKwh4",usersFilterFormLabel:"Users_usersFilterFormLabel__HtrJ9",usersFilterGroup:"Users_usersFilterGroup__3GI8-",filtersLabel:"Users_filtersLabel__2Tzua"}},15:function(e,t){e.exports={sortOptions:{increaseId:"increase",decreaseId:"increase"},filterOptions:{username:"username",id:"ID"},requiredField:"Field is required",defaultAvatarSrc:"https://www.w3schools.com/howto/img_avatar.png"}},245:function(e,t,s){"use strict";s.r(t);var r=s(2),n=s(0),a=s.n(n),i=s(45),c=s.n(i),o=(s(116),function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,252)).then((function(t){var s=t.getCLS,r=t.getFID,n=t.getFCP,a=t.getLCP,i=t.getTTFB;s(e),r(e),n(e),a(e),i(e)}))}),u=(s(117),s(9)),l=s(61),d=s(33),j=s(21),m=s(101),h=s(29),b=s(102),p=s.n(b).a.create({baseURL:"https://fathomless-ocean-00302.herokuapp.com/http://emphasoft-test-assignment.herokuapp.com/"}),f="API_TOKEN_AUTH",O=function(e,t){return function(s){p.post("api-token-auth/",{username:e,password:t}).then((function(e){localStorage.setItem("Token",e.data.token),s({type:f,payload:e.data})}))}},x={token:"",isAuth:!1},v=s(63),g=s.n(v),_=s(103),y=function(e){var t=e||localStorage.getItem("Token");return p({method:"get",url:"api/v1/users/",headers:{Authorization:"Token ".concat(t),accept:"application/json"}}).then((function(e){return e.data})).catch((function(e){return console.log(e)}))},N=s(15),F="SET_USERS",S="CHANGE_USERS_ARRAY",w={users:[]},I=function(e,t,s){return{type:S,filter:e,filterType:t,sortType:s}},T=function(e){return function(){var t=Object(_.a)(g.a.mark((function t(s){var r;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,y(e);case 2:r=t.sent,s({type:F,users:r});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},U=Object(j.c)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f:return Object(h.a)(Object(h.a)({},e),{},{token:t.payload.token,isAuth:!0});default:return e}},usersPage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case F:return Object(h.a)(Object(h.a)({},e),{},{usersArray:t.users,users:t.users});case S:var s=e.users;return t.filter.length>0&&(t.filterType===N.filterOptions.username?s=e.users.filter((function(e){return e.username.includes(t.filter)})):t.filterType===N.filterOptions.id&&(s=e.users.filter((function(e){return e.id.toString().indexOf(t.filter.toString())>-1})))),t.sortType===N.sortOptions.increaseId?s=s.slice().sort((function(e,t){return e.id-t.id})):t.sortType===N.sortOptions.decreaseId&&(s=s.slice().sort((function(e,t){return t.id-e.id}))),Object(h.a)(Object(h.a)({},e),{},{usersArray:s});default:return e}}}),k=Object(j.d)(U,Object(j.a)(m.a)),A=s(6),C=s(7),L=s(11),R=s(12),E=s(247),G=s(106),P=s(250),q=s(251),B=s(248),z=s(14),D=s.n(z),J=s(249),H=s(25),K=function(e){Object(L.a)(s,e);var t=Object(R.a)(s);function s(){var e;Object(A.a)(this,s);for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return(e=t.call.apply(t,[this].concat(n))).submit=function(t,s){var r=s.setSubmitting;e.props.filterUsers(t.filter,t.filterOption,t.sortOption),r(!1)},e}return Object(C.a)(s,[{key:"componentDidMount",value:function(){this.props.usersRequest(this.props.token)}},{key:"render",value:function(){var e=this.props.users;return Object(r.jsxs)("div",{children:[Object(r.jsx)(E.a,{className:D.a.usersFilterForm,children:Object(r.jsx)(G.a,{sm:"auto",md:"auto",lg:"auto",className:D.a.usersFilterFormColumn,children:Object(r.jsx)(H.b,{enableReinitialize:!0,initialValues:{filter:""},onSubmit:this.submit,children:function(e){var t=e.values,s=e.handleChange,n=e.handleBlur,a=e.handleSubmit,i=e.isSubmitting;return Object(r.jsxs)(P.a,{onSubmit:a,className:D.a.usersFilterGroup,children:[Object(r.jsxs)(H.a,{as:"select",className:"form-control",name:"filterOption",children:[Object(r.jsx)("option",{hidden:!0,children:"Filter by:"}),Object(r.jsx)("option",{value:N.filterOptions.username,children:"Username"}),Object(r.jsx)("option",{value:N.filterOptions.id,children:"Id"})]}),Object(r.jsx)(H.a,{type:"text",name:"filter",placeholder:"Enter filter text",className:"form-control",onChange:s,onBlur:n,value:t.filter}),Object(r.jsxs)(H.a,{as:"select",className:"form-control",name:"sortOption",children:[Object(r.jsx)("option",{hidden:!0,children:"Sort by:"}),Object(r.jsx)("option",{value:"none",children:"None"}),Object(r.jsx)("option",{value:N.sortOptions.increaseId,children:"Increasing Id"}),Object(r.jsx)("option",{value:N.sortOptions.decreaseId,children:"Decreasing Id"})]}),Object(r.jsx)(q.a,{type:"submit",disabled:i,children:"Apply"})]})}})})}),!!e&&e.map((function(e){return Object(r.jsx)(B.a,{className:D.a.usersContainer,children:Object(r.jsx)("div",{className:D.a.usersFilterFormColumn,children:Object(r.jsx)(E.a,{className:D.a.customer,sm:"auto",md:"auto",lg:"auto",children:Object(r.jsxs)(G.a,{className:"shadow p-3 mb-2 bg-light rounded ".concat(D.a.usersFilterGroup),children:[Object(r.jsxs)(G.a,{xs:"4",md:"auto",lg:"auto",children:[Object(r.jsx)("img",{src:N.defaultAvatarSrc,className:D.a.images,alt:""}),"                                    ",Object(r.jsx)("div",{className:D.a.customerImageName,children:e.username?e.username:"No user name"}),Object(r.jsxs)("div",{className:D.a.customerImageName,children:["id: ",e.id]})]}),Object(r.jsxs)(G.a,{xs:"auto",md:"auto",lg:"auto",className:D.a.customerInfo,children:[e.first_name?e.first_name:"No first name"," ",e.last_name?e.last_name:"No last name",Object(r.jsxs)("div",{className:e.is_active?D.a.active:D.a.notActive,children:[Object(r.jsx)(J.a,{size:20,style:{padding:"5px"}}),e.is_active?"Online":"Offline"]}),Object(r.jsx)("div",{children:e.is_superuser?Object(r.jsx)("div",{className:D.a.superUser,children:"Super user"}):Object(r.jsx)("div",{})})]})]})})})},e.id)}))]})}}]),s}(n.Component),M=Object(d.b)((function(e){return{token:e.auth.token,users:e.usersPage.usersArray}}),(function(e){return Object(j.b)({usersRequest:T,filterUsers:I},e)}))(K),Q=s(51),V=s(65),Y=s.n(V),X=Object(d.b)((function(e){return{token:e.auth.token,isAuth:e.auth.isAuth}}),(function(e){return Object(j.b)({authToken:O},e)}))((function(e){var t=Q.a({username:Q.b().required(N.requiredField).min(5,"This field must include at least 5 character"),password:Q.b().required(N.requiredField).min(5,"This field must include at least 5 character")});return e.isAuth?Object(r.jsx)(u.a,{to:"/users"}):Object(r.jsx)(B.a,{children:Object(r.jsx)(E.a,{style:{height:"100vh"},className:["justify-content-center","align-items-center"],children:Object(r.jsx)("div",{className:"shadow p-3 mb-5 bg-white rounded",children:Object(r.jsx)(G.a,{lg:"auto",style:{textAlign:"center"},children:Object(r.jsx)(H.b,{enableReinitialize:!0,initialValues:{username:"",password:""},validationSchema:t,onSubmit:function(t,s){var r=s.setSubmitting;e.authToken(t.username,t.password),e.isFetching=!0,r(!1)},children:function(e){var t=e.values,s=e.errors,n=e.touched,a=e.handleChange,i=e.handleBlur,c=e.handleSubmit,o=e.isSubmitting;return Object(r.jsxs)(P.a,{onSubmit:c,children:[Object(r.jsxs)(P.a.Group,{children:[Object(r.jsx)(P.a.Label,{children:"Username"}),Object(r.jsx)(H.a,{type:"username",name:"username",className:"form-control",onChange:a,onBlur:i,value:t.username})]}),Object(r.jsx)("p",{className:Y.a.errorText,children:s.username&&n.username&&s.username}),Object(r.jsxs)(P.a.Group,{children:[Object(r.jsx)(P.a.Label,{children:"Password"}),Object(r.jsx)(H.a,{type:"password",name:"password",className:"form-control",onChange:a,onBlur:i,value:t.password})]}),Object(r.jsx)("p",{className:Y.a.errorText,children:s.password&&n.password&&s.password}),Object(r.jsx)("div",{children:Object(r.jsx)(q.a,{type:"submit",disabled:o,children:"Log In"})})]})}})})})})})}));s(244);function W(){return Object(r.jsxs)(u.d,{children:[Object(r.jsx)(u.b,{exact:!0,path:"/",render:function(){return Object(r.jsx)(u.a,{to:"/login"})}}),Object(r.jsx)(u.b,{path:"/login",render:function(){return Object(r.jsx)(X,{})}}),Object(r.jsx)(u.b,{path:"/users",render:function(){return Object(r.jsx)(M,{})}}),Object(r.jsx)(u.b,{path:"*",render:function(){return Object(r.jsx)("div",{children:"404 PAGE IS NOT FOUND"})}})]})}var Z=function(){return Object(r.jsx)(l.a,{children:Object(r.jsx)(d.a,{store:k,children:Object(r.jsx)(W,{})})})};c.a.render(Object(r.jsx)(a.a.StrictMode,{children:Object(r.jsx)(Z,{})}),document.getElementById("root")),o()},65:function(e,t,s){e.exports={errorText:"LoginPage_errorText__2olkr"}}},[[245,1,2]]]);
//# sourceMappingURL=main.635b6843.chunk.js.map