(this.webpackJsonpemphasoft=this.webpackJsonpemphasoft||[]).push([[0],{115:function(e,t,s){},116:function(e,t,s){},12:function(e,t,s){e.exports={images:"Users_images__1jz2J",customer:"Users_customer__15DTh",customerImageName:"Users_customerImageName__3sQKS",active:"Users_active__3EToL",notActive:"Users_notActive__2f5Ry",activeStatus:"Users_activeStatus__2Ye1Q",customerInfo:"Users_customerInfo__PsXn6",superUser:"Users_superUser__Oitlh",usersFilterForm:"Users_usersFilterForm__2-eam",usersFilterFormColumn:"Users_usersFilterFormColumn__kKwh4",usersFilterFormLabel:"Users_usersFilterFormLabel__HtrJ9",usersFilterGroup:"Users_usersFilterGroup__3GI8-",filtersLabel:"Users_filtersLabel__2Tzua"}},14:function(e,t){e.exports={sortOptions:{increaseId:"increase",decreaseId:"decrease"},filterOptions:{username:"username",id:"ID"},requiredField:"Field is required",defaultAvatarSrc:"https://www.w3schools.com/howto/img_avatar.png"}},244:function(e,t,s){"use strict";s.r(t);var r=s(1),n=s(0),a=s.n(n),i=s(45),c=s.n(i),o=(s(115),function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,252)).then((function(t){var s=t.getCLS,r=t.getFID,n=t.getFCP,a=t.getLCP,i=t.getTTFB;s(e),r(e),n(e),a(e),i(e)}))}),u=(s(116),s(29)),l=s(17),d=s(100),j=s(22),m=s(101),h=s.n(m).a.create({baseURL:"https://fathomless-ocean-00302.herokuapp.com/http://emphasoft-test-assignment.herokuapp.com/"}),b="API_TOKEN_AUTH",p="LOG_OUT",O=function(e,t){return function(s){h.post("api-token-auth/",{username:e,password:t}).then((function(e){localStorage.setItem("Token",e.data.token),s({type:b,payload:e.data})}))}},f={token:"",isAuth:!1},x=function(){return{type:p}},g=s(62),v=s.n(g),_=s(102),y=function(e){var t=e||localStorage.getItem("Token");return h({method:"get",url:"api/v1/users/",headers:{Authorization:"Token ".concat(t),accept:"application/json"}}).then((function(e){return e.data})).catch((function(e){return console.log(e)}))},N=s(14),F="SET_USERS",S="CHANGE_USERS_ARRAY",k={users:[]},T=function(e,t,s){return{type:S,filter:e,filterType:t,sortType:s}},I=function(e){return function(){var t=Object(_.a)(v.a.mark((function t(s){var r;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,y(e);case 2:r=t.sent,s({type:F,users:r});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},w=Object(l.c)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case b:return Object(j.a)(Object(j.a)({},e),{},{token:t.payload.token,isAuth:!0});case p:return console.log("logout"),localStorage.removeItem("Token"),Object(j.a)(Object(j.a)({},e),{},{isAuth:!1});default:return e}},usersPage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case F:return Object(j.a)(Object(j.a)({},e),{},{usersArray:t.users,users:t.users});case S:var s=e.users;return t.filter.length>0&&(t.filterType===N.filterOptions.username?s=e.users.filter((function(e){return e.username.includes(t.filter)})):t.filterType===N.filterOptions.id&&(s=e.users.filter((function(e){return e.id.toString().indexOf(t.filter.toString())>-1})))),t.sortType===N.sortOptions.increaseId?s=s.slice().sort((function(e,t){return e.id-t.id})):t.sortType===N.sortOptions.decreaseId&&(s=s.slice().sort((function(e,t){return t.id-e.id}))),Object(j.a)(Object(j.a)({},e),{},{usersArray:s});default:return e}}}),U=Object(l.d)(w,Object(l.a)(d.a)),A=(s(141),s(21)),C=Object(A.a)(),L=s(19),P=s(26),E=s(51),G=s(247),R=s(248),q=s(108),B=s(250),D=s(251),z=s(64),J=s.n(z),H=Object(u.b)((function(e){return{token:e.auth.token,isAuth:e.auth.isAuth}}),(function(e){return Object(l.b)({authToken:O},e)}))((function(e){var t=E.a({username:E.b().required(N.requiredField).min(5,"This field must include at least 5 character"),password:E.b().required(N.requiredField).min(5,"This field must include at least 5 character")});return Object(n.useEffect)((function(){e.isAuth&&(console.log("login",e.isAuth),C.push("/users"))}),[e.isAuth]),Object(r.jsx)(G.a,{children:Object(r.jsx)(R.a,{style:{height:"100vh"},className:["justify-content-center","align-items-center"],children:Object(r.jsx)("div",{className:"shadow p-3 mb-5 bg-white rounded",children:Object(r.jsx)(q.a,{lg:"auto",style:{textAlign:"center"},children:Object(r.jsx)(P.b,{enableReinitialize:!0,initialValues:{username:"",password:""},validationSchema:t,onSubmit:function(t,s){var r=s.setSubmitting;e.authToken(t.username,t.password),e.isFetching=!0,r(!1)},children:function(e){var t=e.values,s=e.errors,n=e.touched,a=e.handleChange,i=e.handleBlur,c=e.handleSubmit,o=e.isSubmitting;return Object(r.jsxs)(B.a,{onSubmit:c,children:[Object(r.jsxs)(B.a.Group,{children:[Object(r.jsx)(B.a.Label,{children:"Username"}),Object(r.jsx)(P.a,{type:"username",name:"username",className:"form-control",onChange:a,onBlur:i,value:t.username})]}),Object(r.jsx)("p",{className:J.a.errorText,children:s.username&&n.username&&s.username}),Object(r.jsxs)(B.a.Group,{children:[Object(r.jsx)(B.a.Label,{children:"Password"}),Object(r.jsx)(P.a,{type:"password",name:"password",className:"form-control",onChange:a,onBlur:i,value:t.password})]}),Object(r.jsx)("p",{className:J.a.errorText,children:s.password&&n.password&&s.password}),Object(r.jsx)("div",{children:Object(r.jsx)(D.a,{type:"submit",disabled:o,children:"Log In"})})]})}})})})})})})),K=s(6),M=s(7),Q=s(10),V=s(11),Y=s(12),X=s.n(Y),W=s(249),Z=function(e){Object(Q.a)(s,e);var t=Object(V.a)(s);function s(){var e;Object(K.a)(this,s);for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return(e=t.call.apply(t,[this].concat(n))).submit=function(t,s){var r=s.setSubmitting;e.props.filterUsers(t.filter,t.filterOption,t.sortOption),r(!1)},e}return Object(M.a)(s,[{key:"componentDidMount",value:function(){this.props.usersRequest(this.props.token)}},{key:"componentDidUpdate",value:function(e,t,s){var r=this;console.log(C),C.listen((function(e,t){"POP"===t&&(r.props.logOut(),C.push("/login"))}))}},{key:"render",value:function(){var e=this.props.users;return Object(r.jsxs)("div",{children:[Object(r.jsx)(R.a,{className:X.a.usersFilterForm,children:Object(r.jsx)(q.a,{sm:"auto",md:"auto",lg:"auto",className:X.a.usersFilterFormColumn,children:Object(r.jsx)(P.b,{enableReinitialize:!0,initialValues:{filter:""},onSubmit:this.submit,children:function(e){var t=e.values,s=e.handleChange,n=e.handleBlur,a=e.handleSubmit,i=e.isSubmitting;return Object(r.jsxs)(B.a,{onSubmit:a,className:X.a.usersFilterGroup,children:[Object(r.jsxs)(P.a,{as:"select",className:"form-control",name:"filterOption",children:[Object(r.jsx)("option",{hidden:!0,children:"Filter by:"}),Object(r.jsx)("option",{value:N.filterOptions.username,children:"Username"}),Object(r.jsx)("option",{value:N.filterOptions.id,children:"Id"})]}),Object(r.jsx)(P.a,{type:"text",name:"filter",placeholder:"Enter filter text",className:"form-control",onChange:s,onBlur:n,value:t.filter}),Object(r.jsxs)(P.a,{as:"select",className:"form-control",name:"sortOption",children:[Object(r.jsx)("option",{hidden:!0,children:"Sort by:"}),Object(r.jsx)("option",{value:"none",children:"None"}),Object(r.jsx)("option",{value:N.sortOptions.increaseId,children:"Increasing Id"}),Object(r.jsx)("option",{value:N.sortOptions.decreaseId,children:"Decreasing Id"})]}),Object(r.jsx)(D.a,{type:"submit",disabled:i,children:"Apply"})]})}})})}),!!e&&e.map((function(e){return Object(r.jsx)(G.a,{className:X.a.usersContainer,children:Object(r.jsx)("div",{className:X.a.usersFilterFormColumn,children:Object(r.jsx)(R.a,{className:X.a.customer,sm:"auto",md:"auto",lg:"auto",children:Object(r.jsxs)(q.a,{className:"shadow p-3 mb-2 bg-light rounded ".concat(X.a.usersFilterGroup),children:[Object(r.jsxs)(q.a,{xs:"4",md:"auto",lg:"auto",children:[Object(r.jsx)("img",{src:N.defaultAvatarSrc,className:X.a.images,alt:""}),"                                    ",Object(r.jsx)("div",{className:X.a.customerImageName,children:e.username?e.username:"No user name"}),Object(r.jsxs)("div",{className:X.a.customerImageName,children:["id: ",e.id]})]}),Object(r.jsxs)(q.a,{xs:"auto",md:"auto",lg:"auto",className:X.a.customerInfo,children:[e.first_name?e.first_name:"No first name"," ",e.last_name?e.last_name:"No last name",Object(r.jsxs)("div",{className:e.is_active?X.a.active:X.a.notActive,children:[Object(r.jsx)(W.a,{size:20,style:{padding:"5px"}}),e.is_active?"Online":"Offline"]}),Object(r.jsx)("div",{children:e.is_superuser?Object(r.jsx)("div",{className:X.a.superUser,children:"Super user"}):Object(r.jsx)("div",{})})]})]})})})},e.id)}))]})}}]),s}(n.Component),$=Object(u.b)((function(e){return{token:e.auth.token,users:e.usersPage.usersArray}}),(function(e){return Object(l.b)({usersRequest:I,filterUsers:T,logOut:x},e)}))(Z),ee=Object(u.b)((function(e){return{token:e.auth.token}}))((function(e){var t=!!localStorage.getItem("Token")||e.token;return Object(r.jsxs)(L.d,{children:[Object(r.jsx)(L.b,{exact:!0,path:"/",render:function(){return Object(r.jsx)(L.a,{to:"/login"})}}),Object(r.jsx)(L.b,{path:"/login",render:function(){return Object(r.jsx)(H,{})}}),Object(r.jsx)(L.b,{path:"/users",render:function(){return t?Object(r.jsx)($,{}):Object(r.jsx)(L.a,{to:"/login"})}}),Object(r.jsx)(L.b,{path:"*",render:function(){return Object(r.jsx)("div",{children:"404 PAGE IS NOT FOUND"})}})]})})),te=function(){return Object(r.jsx)(u.a,{store:U,children:Object(r.jsx)(L.c,{history:C,children:Object(r.jsx)(ee,{})})})};c.a.render(Object(r.jsx)(a.a.StrictMode,{children:Object(r.jsx)(te,{})}),document.getElementById("root")),o()},64:function(e,t,s){e.exports={errorText:"LoginPage_errorText__2olkr"}}},[[244,1,2]]]);
//# sourceMappingURL=main.1977a782.chunk.js.map